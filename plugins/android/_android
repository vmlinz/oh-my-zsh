#compdef android
#autoload

_android() {
  local -a arguments
  local state line cmds
  arguments=(
    '(-v --verbose)'{-v,--verbose}'[verbose]'
    '(-h --help)'{-h,--help}'[display help screen]'
    '1: :->cmds'
    '*: :->args'
  )
    _arguments -S $arguments

    case $state in
      cmds)
	cmds=(
	    'update:Resynchronize package contents'
	    'search:Search in which package file is included'
	    'list:List contents of a package'
	    'show:Alias for list'
	    'purge:remove all Contents-<ARCH>.gz files in cache directory'
	)
	_describe -t commands 'android command' cmds && ret=0
      ;;
      args)
	case $line[1] in
	    search)
	    return
	    ;;
	    list|show)
	       _deb_packages avail
	       return
	    ;;
	    update|purge)
		# do nothing
		return
	    ;;
	    *)
		_message "command $line[1] not available"
		return
	    ;;
	esac
	return
      ;;
    esac

}

_android "$@"
